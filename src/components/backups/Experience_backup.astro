---
import Education from "./Education.astro";
---

<section id="experiencia" class="experience">
  <div class="container">
    <h2 class="section-title">Experiencia & Educación</h2>
    <p class="section-subtitle">Mi trayectoria profesional y académica</p>
    
    <!-- Experiencia Profesional -->
    <div class="section-container">
      <h3 class="section-category">Experiencia Profesional</h3>
      
      <div class="experience-cards">
        <div class="experience-card">
          <div class="experience-image">
            <img src="/images/proyectos/clinica-miel.png" alt="Clínica de Rehabilitación" />
            <div class="experience-overlay"></div>
          </div>
          <div class="experience-content">
            <span class="date">2025</span>
            <h4 class="title">Desarrollo de Sitio Web para Clínica de Rehabilitación</h4>
            <p class="description">
              Trabajé en equipo para desarrollar un sitio web completo para una clínica de rehabilitación, 
              enfocado en la reservación de citas. El proyecto incluyó el diseño de interfaz de usuario, 
              implementación de sistema de reservas y gestión de base de datos.
            </p>
            <div class="experience-footer">
              <div class="project-links">
                <a href="https://github.com/JuanCarlos0511/proyecto_udm" class="project-link" target="_blank" rel="noopener noreferrer">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                  </svg>
                  GitHub
                </a>
              </div>
              <div class="tags">
                <span class="tag">HTML/CSS</span>
                <span class="tag">JavaScript</span>
                <span class="tag">PHP</span>
                <span class="tag">MySQL</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="experience-card">
          <div class="experience-image">
            <img src="/images/proyectos/punto-venta.png" alt="Sistema de Punto de Venta" />
            <div class="experience-overlay"></div>
          </div>
          <div class="experience-content">
            <span class="date">2024</span>
            <h4 class="title">Desarrollo de Punto de Venta</h4>
            <p class="description">
              Desarrollé un sistema de punto de venta completo utilizando Java, SQL, librerías específicas 
              de Java y JasperReport para la generación de informes. El sistema incluye gestión de inventario, 
              procesamiento de ventas y emisión de recibos.
            </p>
            <div class="experience-footer">
              <div class="project-links">
                <a href="#" class="project-link" target="_blank" rel="noopener noreferrer">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                  </svg>
                  GitHub
                </a>
              </div>
              <div class="tags">
                <span class="tag">Java</span>
                <span class="tag">SQL</span>
                <span class="tag">JasperReport</span>
                <span class="tag">Desktop</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Componente de Educación -->
    <Education />
  </div>
  
  <div class="experience-background">
    <div class="circle circle-1"></div>
    <div class="circle circle-2"></div>
  </div>
</section>

<style>
  .experience {
    background-color: var(--background-color);
    position: relative;
    padding: 5rem 0;
    overflow: hidden;
  }
  
  .experience-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
  }
  
  .circle {
    position: absolute;
    border-radius: 50%;
    filter: blur(60px);
    opacity: 0.15;
  }
  
  .circle-1 {
    width: 400px;
    height: 400px;
    background-color: var(--primary-color);
    top: 10%;
    right: -150px;
  }
  
  .circle-2 {
    width: 300px;
    height: 300px;
    background-color: var(--secondary-color);
    bottom: 15%;
    left: -100px;
  }

  .section-subtitle {
    text-align: center;
    color: var(--text-color);
    opacity: 0.8;
    font-size: 1.1rem;
    margin-bottom: 3rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }
  
  .section-container {
    position: relative;
    z-index: 1;
    max-width: 1000px;
    margin: 0 auto 4rem;
  }
  
  .section-category {
    font-size: 1.8rem;
    margin: 2.5rem 0 1.5rem 0;
    color: var(--primary-color);
    position: relative;
    text-align: center;
    padding-bottom: 1rem;
  }
  
  .section-category::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background-color: var(--accent-color);
    border-radius: 3px;
  }
  
  /* Estilos para tarjetas de experiencia profesional */
  .experience-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
  }
  
  .experience-card {
    background: linear-gradient(145deg, rgba(74, 59, 145, 0.1), rgba(106, 90, 205, 0.1));
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(106, 90, 205, 0.2);
    transform: translateY(0);
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.5s ease;
  }
  
  .experience-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
  }
  
  .experience-image {
    position: relative;
    height: 200px;
    overflow: hidden;
  }
  
  .experience-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }
  
  .experience-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, transparent, rgba(18, 18, 18, 0.4));
  }
  
  .experience-card:hover .experience-image img {
    transform: scale(1.05);
  }
  
  .experience-content {
    padding: 1.5rem;
  }
  
  .experience-footer {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-top: 1rem;
  }
  
  .date {
    display: inline-block;
    padding: 0.3rem 1rem;
    background-color: var(--primary-color);
    color: white;
    border-radius: 20px;
    font-size: 0.9rem;
    margin-bottom: 0.8rem;
  }
  
  .title {
    font-size: 1.3rem;
    margin-bottom: 0.8rem;
    color: var(--text-color);
    line-height: 1.4;
  }
  
  .description {
    color: rgba(248, 248, 255, 0.8);
    margin-bottom: 1rem;
    font-size: 0.95rem;
    line-height: 1.6;
  }
  
  .institution {
    color: var(--accent-color);
    font-weight: 500;
    margin-bottom: 0.8rem;
    font-size: 1rem;
  }
  
  .project-links {
    display: flex;
    gap: 1rem;
  }
  
  .project-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background-color: rgba(106, 90, 205, 0.3);
    color: var(--text-color);
    border-radius: 20px;
    font-size: 0.9rem;
    text-decoration: none;
    transition: all 0.3s ease;
  }
  
  .project-link:hover {
    background-color: var(--primary-color);
    transform: translateY(-3px);
    color: white;
  }
  
  .project-link svg {
    width: 1rem;
    height: 1rem;
  }
  
  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  .tag {
    padding: 0.3rem 1rem;
    background-color: rgba(106, 90, 205, 0.2);
    border-radius: 20px;
    font-size: 0.8rem;
    color: var(--text-color);
  }
  
  /* Línea de tiempo horizontal para educación */
  .education-section {
    margin-top: 5rem;
  }
  
  .education-timeline {
    position: relative;
    margin: 3rem 0;
    padding-top: 1rem;
  }
  
  .timeline-road {
    position: relative;
    height: 100px;
    margin-bottom: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .timeline-track {
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 6px;
    background: linear-gradient(to right, var(--accent-color), var(--primary-color));
    border-radius: 6px;
    box-shadow: 0 0 10px rgba(106, 90, 205, 0.3);
    transform: translateY(-50%);
  }
  
  .timeline-milestones {
    position: relative;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
  
  .milestone {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-width: 60px;
    height: 80px;
  }
  
  .milestone-dot {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: linear-gradient(145deg, var(--primary-color), var(--accent-color));
    position: relative;
    box-shadow: 0 0 15px rgba(106, 90, 205, 0.5);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    z-index: 5;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 3px solid rgba(255, 255, 255, 0.4);
  }
  
  .milestone-dot:hover {
    transform: scale(1.3);
    box-shadow: 0 0 25px rgba(106, 90, 205, 1);
    border-color: rgba(255, 255, 255, 0.8);
  }
  
  .milestone-dot.active {
    background: linear-gradient(145deg, var(--accent-color), var(--primary-color));
    transform: scale(1.2);
    box-shadow: 0 0 30px rgba(106, 90, 205, 1);
    border: 3px solid white;
  }
  
  .milestone-dot.pulse {
    animation: pulseEffect 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  }
  
  @keyframes pulseEffect {
    0% {
      box-shadow: 0 0 0 0 rgba(106, 90, 205, 0.7);
    }
    70% {
      box-shadow: 0 0 0 15px rgba(106, 90, 205, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(106, 90, 205, 0);
    }
  }
  
  .milestone-dot::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 12px;
    height: 12px;
    background-color: white;
    border-radius: 50%;
    transition: all 0.3s ease;
  }
  
  .milestone-dot:hover::before {
    width: 14px;
    height: 14px;
  }
  
  .milestone-dot.active::before {
    width: 14px;
    height: 14px;
    background-color: #ffffff;
  }
  
  .milestone-year {
    position: absolute;
    top: 45px;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-color);
    transition: all 0.3s ease;
    background-color: rgba(18, 18, 18, 0.8);
    padding: 4px 8px;
    border-radius: 12px;
    opacity: 1;
    transform: translateY(0);
    pointer-events: none;
    white-space: nowrap;
    text-align: center;
    left: 50%;
    transform: translateX(-50%);
  }
  
  .milestone:hover .milestone-year {
    opacity: 1;
    background-color: rgba(18, 18, 18, 0.9);
    color: white;
  }
  
  .milestone-1 {
    left: 30%;
    transform: translate(-50%, -50%);
    z-index: 10;
  }
  
  .milestone-2 {
    left: 70%;
    transform: translate(-50%, -50%);
    z-index: 10;
  }
  
  .education-cards {
    position: relative;
    min-height: 350px;
    margin-top: 50px;
  }
  
  .education-cards.desktop-view {
    position: relative;
    min-height: 350px;
    display: block;
  }
  
  .education-cards.mobile-view {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .education-card {
    position: absolute;
    display: flex;
    gap: 2rem;
    background: linear-gradient(145deg, rgba(74, 59, 145, 0.1), rgba(106, 90, 205, 0.1));
    border-radius: 12px;
    padding: 2rem;
    border: 1px solid rgba(106, 90, 205, 0.2);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    width: 70%;
    max-width: 700px;
    margin: 0 auto;
    transition: opacity 0.4s ease, visibility 0.4s ease;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    box-sizing: border-box;
  }
  
  /* Estilos específicos para desktop */
  .desktop-view .education-card {
    position: absolute;
  }
  
  /* Estilos específicos para móvil */
  .mobile-view .education-card {
    position: relative;
    transform: none !important;
    padding: 1.5rem;
    width: 90%;
    max-width: 300px;
  }
  
  .education-card.active {
    opacity: 1;
    visibility: visible;
    z-index: 2;
    pointer-events: auto;
  }
  
  /* Animación para desktop */
  .desktop-view .education-card.active {
    animation: fadeInCard 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
  }
  
  /* Animación para móvil */
  .mobile-view .education-card.active {
    animation: fadeInMobileCard 0.4s ease forwards;
  }
  
  @keyframes fadeInCard {
    0% {
      opacity: 0;
      transform: translateY(20px) scale(0.95);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  
  @keyframes fadeInMobileCard {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }
  /* Posicionamiento en desktop */
  .desktop-view .education-card.left {
    left: 0;
    width: 70%;
  }
  
  .desktop-view .education-card.right {
    right: 0;
    width: 70%;
  }
  
  /* Posicionamiento en móvil - centrado */
  .mobile-view .education-card.left,
  .mobile-view .education-card.right {
    left: 50%;
    transform: translateX(-50%);
  }
  
  .education-icon-container {
    flex-shrink: 0;
    width: 80px;
    height: 80px;
    background: linear-gradient(145deg, rgba(74, 59, 145, 0.3), rgba(106, 90, 205, 0.3));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid rgba(106, 90, 205, 0.3);
  }
  
  .education-icon {
    width: 50%;
    height: 50%;
    color: var(--text-color);
  }
  
  .education-content {
    flex: 1;
  }
  
  .education-content .title {
    font-size: 1.4rem;
    margin-bottom: 0.5rem;
  }
  
  .education-content .institution {
    color: var(--accent-color);
    font-weight: 500;
    margin-bottom: 1rem;
  }
  
  .education-content .description {
    margin-bottom: 1.5rem;
  }
  
  /* Animaciones para la sección de educación */
  @keyframes glowingDot {
    0% {
      box-shadow: 0 0 5px rgba(106, 90, 205, 0.5);
    }
    50% {
      box-shadow: 0 0 20px rgba(106, 90, 205, 0.8);
    }
    100% {
      box-shadow: 0 0 5px rgba(106, 90, 205, 0.5);
    }
  }
  
  @keyframes pulse {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1);
    }
  }
  
  .milestone-dot {
    animation: glowingDot 3s infinite, pulse 2s infinite;
  }
  
  .milestone-dot.active {
    animation: glowingDot 1.5s infinite;
  }
  
  .milestone:nth-child(2) .milestone-dot {
    animation-delay: 1.5s;
  }
  
  @keyframes roadAnimation {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
  
  .timeline-track {
    background-size: 200% 200%;
    animation: roadAnimation 6s linear infinite;
  }
  
  @media (max-width: 992px) {
    .education-card {
      width: 90%;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 1.5rem;
    }
    
    .education-icon-container {
      margin-bottom: 1.5rem;
    }
    
    .education-content .tags {
      justify-content: center;
    }
  }
  
  @media (max-width: 768px) {
    .milestone-1 {
      left: 25%;
    }
    
    .milestone-2 {
      left: 75%;
    }
    
    .education-section {
      margin-top: 4rem;
      padding: 0 1rem;
    }
    
    .education-cards {
      position: relative;
      min-height: 450px;
      width: 100%;
      box-sizing: border-box;
      overflow: visible;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .education-card.left, .education-card.right {
      position: relative;
      left: 0;
      transform: none;
      width: 100%;
      max-width: 100%;
      margin: 0 auto;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 1rem;
      box-sizing: border-box;
      opacity: 0;
      visibility: hidden;
      display: none;
    }
    
    .education-card.active {
      opacity: 1;
      visibility: visible;
      transform: none;
      display: flex;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      width: 90%;
      margin: 0 auto;
    }
    
    .education-content .title {
      font-size: 1.3rem;
    }
    
    .education-icon-container {
      margin-bottom: 1.5rem;
    }
    
    .education-content .tags {
      justify-content: center;
    }
  }
  
  @media (max-width: 480px) {
    .timeline-road {
      height: 80px;
      margin-bottom: 60px;
    }
    
    .milestone-dot {
      width: 20px;
      height: 20px;
    }
    
    .milestone-dot::before {
      width: 8px;
      height: 8px;
    }
    
    .milestone-year {
      font-size: 0.75rem;
      padding: 3px 6px;
      top: 35px;
      white-space: nowrap;
    }
    
    .education-card.left, .education-card.right {
      width: 90%;
      max-width: 320px;
      padding: 1.2rem;
    }
    
    .education-cards {
      min-height: 480px;
    }
    
    .education-icon-container {
      width: 50px;
      height: 50px;
    }
    
    .education-content .title {
      font-size: 1.1rem;
    }
    
    .education-content .description {
      font-size: 0.85rem;
    }
    
    .education-content .tag {
      font-size: 0.7rem;
      padding: 0.2rem 0.6rem;
      margin: 0.2rem;
    }
  }
  
  /* Estilos específicos para dispositivos muy pequeños */
  @media (max-width: 360px) {
    .education-card.left, .education-card.right {
      width: 85%; /* Reducido para asegurar que quepa en la pantalla */
      max-width: 260px;
      padding: 0.8rem;
      margin: 0 auto;
      position: relative !important; /* Forzar posición relativa */
      left: auto !important; /* Anular posicionamiento absoluto */
      right: auto !important;
      transform: none !important; /* Anular transformaciones */
    }
    
    .education-section {
      padding: 0;
    }
    
    .education-cards {
      min-height: 520px;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      padding: 0 5px; /* Reducir padding horizontal */
    }
    
    .education-card.active {
      z-index: 5;
    }
    
    .education-icon-container {
      width: 45px;
      height: 45px;
      margin-bottom: 1rem;
    }
    
    .education-content .title {
      font-size: 1rem;
    }
    
    .education-content .description {
      font-size: 0.8rem;
      line-height: 1.4;
    }
    
    .milestone-year {
      font-size: 0.7rem;
    }
    
    .tags {
      flex-wrap: wrap;
      gap: 0.3rem;
    }
  }
  
  /* Animación de aparición para las tarjetas de experiencia */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .experience-card {
    animation: fadeInUp 0.8s ease-out forwards;
  }
  
  .experience-card:nth-child(2) {
    animation-delay: 0.3s;
  }
  
  /* Animación de desplazamiento horizontal para la línea de tiempo */
  @keyframes slideInRight {
    from {
      transform: translateX(-100%);
    }
    to {
      transform: translateX(0);
    }
  }
  
  .timeline-line {
    animation: slideInRight 1.5s ease-out forwards;
  }
  
  /* Animación de pulso para los puntos de la línea de tiempo */
  @keyframes pulse {
    0% {
      transform: translateX(-50%) scale(1);
      box-shadow: 0 0 0 0 rgba(106, 90, 205, 0.7);
    }
    70% {
      transform: translateX(-50%) scale(1.1);
      box-shadow: 0 0 0 10px rgba(106, 90, 205, 0);
    }
    100% {
      transform: translateX(-50%) scale(1);
      box-shadow: 0 0 0 0 rgba(106, 90, 205, 0);
    }
  }
  
  .timeline-dot {
    animation: pulse 2s infinite;
  }
  
  .timeline-item:nth-child(2) .timeline-dot {
    animation-delay: 1s;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Animación al hacer scroll para que los elementos aparezcan
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      threshold: 0.1
    });
    
    document.querySelectorAll('.experience-card').forEach(card => {
      observer.observe(card);
    });
    
    // Efecto de elevación al pasar el mouse sobre las tarjetas de experiencia
    document.querySelectorAll('.experience-card').forEach(card => {
      card.addEventListener('mouseenter', () => {
        card.style.transform = 'translateY(-15px) scale(1.02)';
        card.style.boxShadow = '0 20px 40px rgba(0, 0, 0, 0.2)';
      });
      
      card.addEventListener('mouseleave', () => {
        card.style.transform = 'translateY(0) scale(1)';
        card.style.boxShadow = '0 10px 30px rgba(0, 0, 0, 0.1)';
      });
    });
    
    // Manejo de la línea de tiempo de educación
    const milestones = Array.from(document.querySelectorAll('.milestone-dot'));
    const educationCards = Array.from(document.querySelectorAll('.education-card'));
    
    // Función para mostrar una tarjeta específica
    const showCard = (cardIndex) => {
      // Ocultar todas las tarjetas primero
      educationCards.forEach(card => {
        card.classList.remove('active');
        card.style.opacity = '0';
        card.style.visibility = 'hidden';
      });
      
      // Mostrar la tarjeta seleccionada
      if (educationCards[cardIndex]) {
        const activeCard = educationCards[cardIndex];
        activeCard.classList.add('active');
        activeCard.style.opacity = '1';
        activeCard.style.visibility = 'visible';
        
        // Ajustes específicos para móvil o desktop
        const isMobile = window.innerWidth <= 768;
        if (isMobile) {
          // Configuración para móvil
          activeCard.style.display = 'flex';
          activeCard.style.position = 'relative';
          activeCard.style.width = '90%';
          activeCard.style.maxWidth = '300px';
          activeCard.style.left = '50%';
          activeCard.style.transform = 'translateX(-50%)';
          activeCard.style.margin = '0 auto';
        } else {
          // Configuración para desktop
          activeCard.style.display = 'flex';
          activeCard.style.position = 'absolute';
          activeCard.style.width = '70%';
          activeCard.style.maxWidth = '700px';
          
          // Posicionamiento izquierda/derecha según la clase
          if (activeCard.classList.contains('left')) {
            activeCard.style.left = '0';
            activeCard.style.right = 'auto';
            activeCard.style.transform = 'none';
          } else {
            activeCard.style.right = '0';
            activeCard.style.left = 'auto';
            activeCard.style.transform = 'none';
          }
        }
      }
      
      // Actualizar el estado activo de los milestone-dots
      milestones.forEach((dot, i) => {
        if (i === cardIndex) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
    };
    
    // Añadir eventos de clic a los puntos de la línea de tiempo
    milestones.forEach((milestone, index) => {
      milestone.addEventListener('click', function() {
        showCard(index);
        
        // Efecto visual mejorado al hacer clic
        this.classList.add('pulse');
        this.style.transform = 'scale(0.85)';
        
        setTimeout(() => {
          this.style.transform = 'scale(1.15)';
          
          setTimeout(() => {
            this.style.transform = 'scale(1)';
            setTimeout(() => {
              this.classList.remove('pulse');
            }, 300);
          }, 150);
        }, 150);
      });
    });
    
    // Mostrar la primera tarjeta (preparatoria) por defecto
    setTimeout(() => {
      showCard(0);
      // Añadir clase active al primer milestone
      if (milestones[0]) {
        milestones[0].classList.add('active');
      }
    }, 300);
    
    // Animación al hacer scroll para la línea de tiempo
    const animateTimelineOnScroll = () => {
      const timelineSection = document.querySelector('.education-timeline');
      if (!timelineSection) return;
      
      const sectionTop = timelineSection.getBoundingClientRect().top;
      const windowHeight = window.innerHeight;
      
      if (sectionTop < windowHeight * 0.75) {
        milestones.forEach((milestone, index) => {
          setTimeout(() => {
            milestone.style.animation = 'glowingDot 3s infinite';
            if (index === 1) {
              milestone.style.animationDelay = '1.5s';
            }
          }, 300 * index);
        });
      }
    };
    
    // Ejecutar animación al cargar y al hacer scroll
    animateTimelineOnScroll();
    window.addEventListener('scroll', animateTimelineOnScroll);
    
    // Mejorar el desplazamiento en dispositivos móviles
    let currentIndex = 0;
    
    // Función para aplicar los estilos adecuados según el tamaño de la pantalla
    const adjustForScreenSize = () => {
      const isMobile = window.innerWidth <= 768;
      
      // Establecemos la clase CSS para el contenedor principal
      const cardsContainer = document.querySelector('.education-cards');
      if (cardsContainer) {
        if (isMobile) {
          cardsContainer.classList.add('mobile-view');
          cardsContainer.classList.remove('desktop-view');
        } else {
          cardsContainer.classList.add('desktop-view');
          cardsContainer.classList.remove('mobile-view');
        }
      }
      
      // Re-aplicar el active a la tarjeta actual para ajustar los estilos
      if (educationCards[currentIndex]) {
        showCard(currentIndex);
      }
      
      // Configurar swipe para móvil si estamos en un dispositivo móvil
      if (isMobile) {
        // Configurar swipe para móvil
        let touchStartX = 0;
        let touchEndX = 0;
        
        const timelineElement = document.querySelector('.education-timeline');
        if (timelineElement) {
          const handleSwipe = () => {
            // Determinar la dirección del swipe
            const diff = touchStartX - touchEndX;
            
            // Si el swipe es significativo (más de 50px)
            if (Math.abs(diff) > 50) {
              // Swipe izquierda (siguiente)
              if (diff > 0 && currentIndex < educationCards.length - 1) {
                currentIndex++;
                showCard(currentIndex);
              }
              // Swipe derecha (anterior)
              else if (diff < 0 && currentIndex > 0) {
                currentIndex--;
                showCard(currentIndex);
              }
            }
          };
          
          // Limpiamos los event listeners anteriores (si existen)
          timelineElement.removeEventListener('touchstart', onTouchStart);
          timelineElement.removeEventListener('touchend', onTouchEnd);
          
          // Definimos las funciones para los event listeners
          function onTouchStart(e) {
            touchStartX = e.changedTouches[0].screenX;
          }
          
          function onTouchEnd(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
          }
          
          // Agregamos los nuevos event listeners
          timelineElement.addEventListener('touchstart', onTouchStart);
          timelineElement.addEventListener('touchend', onTouchEnd);
        }
      } else {
        // Restaurar posición en desktop
        educationCards.forEach(card => {
          if (card.classList.contains('left')) {
            card.style.left = '0';
            card.style.right = 'auto';
          } else {
            card.style.right = '0';
            card.style.left = 'auto';
          }
        });
        
        // Re-aplicar el active a la tarjeta actual
        if (educationCards[currentIndex]) {
          showCard(currentIndex);
        }
      }
    };
    
    // Aplicar ajustes iniciales
    adjustForScreenSize();
    
    // Escuchar cambios en el tamaño de la ventana
    window.addEventListener('resize', adjustForScreenSize);
  });
</script>
